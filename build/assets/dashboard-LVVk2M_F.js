import{r as o,_ as j,R as i,b as d,c as y,P as a,d as k,j as e,C as T}from"./index-Cjwx5h4X.js";import{C as B,a as R,b as A,A as I}from"./constant-CYzBiGwF.js";import{C as b,a as C}from"./CRow-DBO4UyjQ.js";import{C as L}from"./CCardHeader-BnaznyAs.js";var E=o.createContext({}),w=o.forwardRef(function(s,m){var t=s.children,h=s.className,c=j(s,["children","className"]);return i.createElement("div",d({className:y("progress-stacked",h),ref:m},c),i.createElement(E.Provider,{value:{stacked:!0}},t))});w.propTypes={children:a.node,className:a.string};w.displayName="CProgressStacked";var S=o.forwardRef(function(s,m){var t,h=s.children,c=s.animated,p=s.className,g=s.color,n=s.value,v=n===void 0?0:n,u=s.variant,l=j(s,["children","animated","className","color","value","variant"]),r=o.useContext(E).stacked;return i.createElement("div",d({className:y("progress-bar",(t={},t["bg-".concat(g)]=g,t["progress-bar-".concat(u)]=u,t["progress-bar-animated"]=c,t),p)},!r&&{style:{width:"".concat(v,"%")}},l,{ref:m}),h)});S.propTypes={animated:a.bool,children:a.node,className:a.string,color:k,value:a.number,variant:a.oneOf(["striped"])};S.displayName="CProgressBar";var P=o.forwardRef(function(s,m){var t=s.children,h=s.className,c=s.height,p=s.progressBarClassName,g=s.thin,n=s.value,v=s.white,u=j(s,["children","className","height","progressBarClassName","thin","value","white"]),l=o.useContext(E).stacked;return i.createElement("div",d({className:y("progress",{"progress-thin":g,"progress-white":v},h)},n!==void 0&&{role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100},{style:d(d({},c?{height:"".concat(c,"px")}:{}),l?{width:"".concat(n,"%")}:{}),ref:m}),i.Children.toArray(t).some(function(r){return r.type&&r.type.displayName==="CProgressBar"})?i.Children.map(t,function(r){if(i.isValidElement(r)&&r.type.displayName==="CProgressBar")return i.cloneElement(r,d(d({},n&&{value:n}),u))}):i.createElement(S,d({},p&&{className:p},{value:n},u),t))});P.propTypes={children:a.node,className:a.string,height:a.number,progressBarClassName:a.string,thin:a.bool,value:a.number,white:a.bool};P.displayName="CProgress";const H=()=>{const[s,m]=o.useState(null),[t,h]=o.useState(!0),[c,p]=o.useState("");o.useEffect(()=>{(async()=>{try{const r=await A.get(`${I}/statistics`);m(r.data)}catch{p("Erreur lors du chargement des statistiques")}finally{h(!1)}})()},[]);const v=s?((l,r)=>{const x=Array.from({length:r},()=>[]);return l.forEach((f,N)=>{x[N%r].push(f)}),x})(s.data,3):[],u=(l,r)=>r>0?l/r*100:0;return e.jsx(e.Fragment,{children:e.jsx(b,{children:e.jsx(C,{xs:!0,children:e.jsxs(B,{className:"mb-4",children:[e.jsx(L,{className:"text-center",children:e.jsx("strong",{children:"STATISTIQUES DES TECHNOLOGIES LES PLUS POSTULÉES"})}),e.jsx(R,{children:t?e.jsx(T,{}):c?e.jsx("p",{style:{color:"red"},children:c}):s?e.jsxs(e.Fragment,{children:[e.jsxs(b,{children:[e.jsx(C,{xs:6,children:e.jsxs("div",{className:"border-start border-start-4 border-start-success py-1 px-3",children:[e.jsx("div",{className:"text-body-secondary text-truncate small",children:"Nombre total des offres"}),e.jsx("div",{className:"fs-5 fw-semibold",children:s.totalOffers})]})}),e.jsx(C,{xs:6,children:e.jsxs("div",{className:"border-start border-start-4 border-start-danger py-1 px-3 mb-3",children:[e.jsx("div",{className:"text-body-secondary text-truncate small",children:"Nombre total des candidatures"}),e.jsx("div",{className:"fs-5 fw-semibold",children:s.totalCandidates})]})})]}),e.jsx("hr",{className:"mt-0"}),e.jsx(b,{children:v.map((l,r)=>e.jsx(C,{children:l.map((x,f)=>{const N=u(x.result,s.totalCandidates);return e.jsxs("div",{className:"progress-group mb-4",children:[e.jsx("div",{className:"progress-group-prepend",children:e.jsx("span",{className:"text-body-secondary small",children:x.skill})}),e.jsxs("div",{className:"progress-group-bars",children:[e.jsx(P,{thin:!0,color:"info",value:N}),e.jsxs("span",{className:"ms-2",children:[N.toFixed(2)," % (",x.result," Candidats)"]})]})]},f)})},r))})]}):e.jsx("p",{children:"Aucune donnée disponible"})})]})})})})};export{H as default};
