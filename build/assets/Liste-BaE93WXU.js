import{r as t,j as e,C as b,L as _}from"./index-Cjwx5h4X.js";import{C as A,a as R,b as E,A as k}from"./constant-CYzBiGwF.js";import{C as I,a as N,b as g,c as m,d as y,e as d,P as z}from"./PaginationPerso-CRZnBz-y.js";import{C,a as s}from"./CRow-DBO4UyjQ.js";import{C as L}from"./CCardHeader-BnaznyAs.js";import{C as v}from"./CForm-DIBcrnez.js";import{C as h}from"./CFormInput-D_S-EnzH.js";import{a as w}from"./index.esm-DRrJMXd2.js";const J=()=>{const[p,j]=t.useState([]),[o,u]=t.useState({first_name:"",last_name:"",email:""}),[f,x]=t.useState(!1),[l,P]=t.useState({totalPages:1,currentPage:1,pageSize:5,totalResults:0}),i=async(a=0)=>{x(!0);try{const r=localStorage.getItem("generateTokken");if(console.log("Token:",r),!r){console.error("Token manquant");return}const n=(await E.get(`${k}/Admin/search`,{params:{page:a,pageSize:l.pageSize},headers:{Authorization:`Bearer ${r}`}})).data;j(n.admins),P({totalPages:n.totalPages,currentPage:n.currentPage,pageSize:n.pageSize,totalResults:n.totalResults})}catch(r){console.error("Error fetching admins",r)}finally{x(!1)}};t.useEffect(()=>{i()},[]);const c=a=>{u({...o,[a.target.name]:a.target.value})},S=()=>{i()},T=a=>{i(a)};return e.jsx(C,{children:e.jsx(s,{xs:12,children:e.jsxs(A,{className:"mb-4",children:[e.jsx(L,{className:"text-center",children:e.jsx("strong",{children:"LISTE DES ADMINISTRATEURS"})}),e.jsxs(R,{children:[e.jsx(v,{className:"mb-4",children:e.jsxs(C,{className:"mb-3",children:[e.jsx(s,{md:3,children:e.jsx(h,{name:"first_name",placeholder:"Prénom",value:o.first_name,onChange:c})}),e.jsx(s,{md:3,children:e.jsx(h,{name:"last_name",placeholder:"Nom de famille",value:o.last_name,onChange:c})}),e.jsx(s,{md:3,children:e.jsx(h,{name:"email",placeholder:"E-mail",value:o.email,onChange:c})}),e.jsx(s,{md:3,children:e.jsx(w,{color:"primary",onClick:S,children:"Rechercher"})})]})}),f?e.jsx(b,{}):e.jsxs(I,{children:[e.jsx(N,{children:e.jsxs(g,{children:[e.jsx(m,{scope:"col",children:"Prénom"}),e.jsx(m,{scope:"col",children:"Nom de famille"}),e.jsx(m,{scope:"col",children:"E-mail"})]})}),e.jsx(y,{children:p.map(a=>e.jsxs(g,{children:[e.jsx(d,{scope:"row",children:e.jsx(_,{to:`/admin/detail/${a._id}`,name:"A propos de l\\'offre",children:a.first_name})}),e.jsx(d,{children:a.last_name}),e.jsx(d,{children:a.email})]},a._id))})]}),e.jsx(s,{xs:12,children:e.jsx(z,{currentPage:l.currentPage,totalPages:l.totalPages,onPageChange:T})})]})]})})})};export{J as default};
