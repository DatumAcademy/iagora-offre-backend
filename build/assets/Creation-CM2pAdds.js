import{r as h,_ as T,R as y,b as N,c as q,P as j,j as e}from"./index-Cjwx5h4X.js";import{C as E,a as F,b as L,A}from"./constant-CYzBiGwF.js";import{C as R,a as V}from"./CRow-DBO4UyjQ.js";import{C as O}from"./CCardHeader-BnaznyAs.js";import{C as W}from"./CForm-DIBcrnez.js";import{C as r,a as n}from"./CInputGroupText-BAr6oxw4.js";import{C as x}from"./CFormSelect-BUKxBF4B.js";import{a as k,C as o}from"./CFormInput-D_S-EnzH.js";import{a as w}from"./index.esm-DRrJMXd2.js";var g=h.forwardRef(function(a,c){var d=a.children,p=a.className,m=a.feedback,f=a.feedbackInvalid,l=a.feedbackValid,u=a.floatingClassName,b=a.floatingLabel,s=a.id,i=a.invalid,t=a.label,S=a.plainText,D=a.text,I=a.tooltipFeedback,v=a.valid,C=T(a,["children","className","feedback","feedbackInvalid","feedbackValid","floatingClassName","floatingLabel","id","invalid","label","plainText","text","tooltipFeedback","valid"]);return y.createElement(k,{describedby:C["aria-describedby"],feedback:m,feedbackInvalid:f,feedbackValid:l,floatingClassName:u,floatingLabel:b,id:s,invalid:i,label:t,text:D,tooltipFeedback:I,valid:v},y.createElement("textarea",N({className:q(S?"form-control-plaintext":"form-control",{"is-invalid":i,"is-valid":v},p),id:s},C,{ref:c}),d))});g.propTypes=N({className:j.string,id:j.string,plainText:j.bool},k.propTypes);g.displayName="CFormTextarea";const K=()=>{const[a,c]=h.useState({type:"",label:"",company:"",shortdescription:"",skills:"",contract:"",typeWork:"",city:"",deadlinedate:"",minexperience:0,language:{label:"",level:""}}),[d,p]=h.useState(!1),[m,f]=h.useState(""),l=s=>{const{name:i,value:t}=s.target;c({...a,[i]:t})},u=s=>{const{name:i,value:t}=s.target;c({...a,language:{...a.language,[i]:t}})},b=async s=>{s.preventDefault(),p(!0);const i={type:a.type,offers:[{label:a.label,company:a.company,shortdescription:a.shortdescription,skills:a.skills,contract:a.contract,type:a.typeWork,city:a.city,deadlinedate:a.deadlinedate.replace("-","/"),minexperience:a.minexperience,language:{label:a.language.label,level:a.language.level},candidate:[]}]};try{(await L.post(`${A}/create`,i)).status===201&&alert("Offre créée avec succès!")}catch(t){console.error("Erreur lors de la création de l'offre",t),f("Erreur lors de la création de l'offre")}finally{p(!1)}};return e.jsx(R,{children:e.jsx(V,{md:12,children:e.jsxs(E,{className:"mb-4",children:[e.jsx(O,{className:"text-center",children:e.jsx("strong",{children:"CREATION D'UNE OFFRE"})}),e.jsx(F,{children:e.jsxs(W,{onSubmit:b,children:[e.jsxs(r,{className:"mb-3",children:[e.jsx(n,{children:"Type d'offre"}),e.jsxs(x,{name:"type",value:a.type,onChange:l,required:!0,children:[e.jsx("option",{value:"",children:"Sélectionner"}),e.jsx("option",{value:"Stage",children:"Stage"}),e.jsx("option",{value:"Emplois",children:"Emploi"})]})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(n,{children:"Libellé"}),e.jsx(o,{type:"text",placeholder:"Libellé",name:"label",required:!0,value:a.label,onChange:l})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(n,{children:"Entreprise"}),e.jsx(o,{type:"text",required:!0,placeholder:"Nom de l'entreprise",name:"company",value:a.company,onChange:l})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(n,{children:"Description"}),e.jsx(g,{placeholder:"Courte description de l'offre",name:"shortdescription",required:!0,value:a.shortdescription,onChange:l})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(n,{children:"Compétences"}),e.jsx(o,{type:"text",required:!0,placeholder:"Compétences (séparées par des virgules)",name:"skills",value:a.skills,onChange:l})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(n,{children:"Contrat"}),e.jsxs(x,{name:"contract",value:a.contract,onChange:l,required:!0,children:[e.jsx("option",{value:"",children:"Sélectionner"}),e.jsx("option",{value:"CDD",children:"CDD"}),e.jsx("option",{value:"CDI",children:"CDI"}),e.jsx("option",{value:"Stagiaire",children:"Stage"})]})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(n,{children:"Type de Travail"}),e.jsxs(x,{name:"typeWork",value:a.typeWork,onChange:l,required:!0,children:[e.jsx("option",{value:"",children:"Sélectionner"}),e.jsx("option",{value:"Sur Site",children:"Sur Site"}),e.jsx("option",{value:"A Distance",children:"A Distance"})]})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(n,{children:"Ville"}),e.jsx(o,{type:"text",required:!0,placeholder:"Ville",name:"city",value:a.city,onChange:l})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(n,{children:"Date Limite"}),e.jsx(o,{type:"date",required:!0,name:"deadlinedate",value:a.deadlinedate,onChange:l})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(n,{children:"Années d'expérience minimum"}),e.jsx(o,{type:"number",required:!0,name:"minexperience",value:a.minexperience,onChange:l})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(n,{children:"Langue"}),e.jsx(o,{type:"text",required:!0,placeholder:"Label de la langue",name:"label",value:a.language.label,onChange:u})]}),e.jsxs(r,{className:"mb-3",children:[e.jsx(n,{children:"Niveau"}),e.jsxs(x,{name:"level",value:a.language.level,onChange:u,required:!0,children:[e.jsx("option",{value:"",children:"Sélectionner"}),e.jsx("option",{value:"Moyen",children:"Moyen"}),e.jsx("option",{value:"Intermédiaire",children:"Intermédiaire"}),e.jsx("option",{value:"Avancé",children:"Avancé"})]})]}),m&&e.jsx("p",{style:{color:"success"},children:m}),e.jsx("div",{className:"d-grid",children:e.jsx(w,{color:"primary",type:"submit",disabled:d,children:d?"Création en cours...":"Créer l'offre"})})]})})]})})})};export{K as default};
